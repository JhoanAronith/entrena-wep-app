<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="UTF-8">
        <title>Registro de Usuario</title>
        <!-- Bootstrap -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
        <!-- Font Awesome -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
        <!-- NavBar -->
        <link rel="stylesheet" th:href="@{/navbar.css}" />
        <!-- Registro -->
        <link rel="stylesheet" th:href="@{/registro.css}" />
    </head>
    <body>
        <div th:insert="~{fragments/navbar :: navbar}"></div>

        <div class="registro-container shadow">
            <h3 class="registro-title text-center mb-4">Formulario de Registro</h3>

            <!-- Mensaje de éxito -->
            <div th:if="${success}" class="alert alert-success registro-alert" role="alert">
                <i class="fas fa-check-circle me-2"></i> ¡Registro exitoso!
            </div>

            <form th:action="@{/registro}" th:object="${registroDTO}" method="post" class="row g-4 registro-form">

                <div class="text-danger" th:if="${#fields.hasGlobalErrors()}">
                    <p th:each="error : ${#fields.globalErrors()}" th:text="${error}"></p>
                </div>

                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                <input type="hidden" name="rol" th:value="USUARIO" />

                <!-- Nombre Completo -->
                <div class="col-md-6">
                    <label class="form-label registro-label">
                        <i class="fas fa-user me-2 text-primary icon"></i>Nombre Completo
                    </label>
                    <input type="text" th:field="*{nombreCompleto}" class="form-control registro-input" placeholder="Ingresa tu nombre completo">
                    <div class="text-danger registro-error" th:if="${#fields.hasErrors('nombreCompleto')}" th:errors="*{nombreCompleto}"></div> 
                </div>

                <!-- Nombre de Usuario -->
                <div class="col-md-6">
                    <label class="form-label registro-label">
                        <i class="fas fa-user-tag me-2 text-primary icon"></i>Nombre de Usuario
                    </label>
                    <input type="text" th:field="*{nombreUsuario}" class="form-control registro-input" placeholder="Ingresa tu nombre de usuario">
                    <div class="text-danger registro-error" th:if="${#fields.hasErrors('nombreUsuario')}" th:errors="*{nombreUsuario}"></div>
                </div>

                <!-- DNI -->
                <div class="col-md-6">
                    <label class="form-label registro-label">
                        <i class="fas fa-id-card me-2 text-primary icon"></i>DNI
                    </label>
                    <input type="text" th:field="*{dni}" class="form-control registro-input" placeholder="Ingresa tu DNI">
                    <div class="text-danger registro-error" th:if="${#fields.hasErrors('dni')}" th:errors="*{dni}"></div>
                </div>

                <!-- Teléfono -->
                <div class="col-md-6">
                    <label class="form-label registro-label">
                        <i class="fas fa-phone me-2 text-primary icon"></i>Teléfono
                    </label>
                    <input type="text" th:field="*{telefono}" class="form-control registro-input" placeholder="Ingresa tu número de teléfono">
                    <div class="text-danger registro-error" th:if="${#fields.hasErrors('telefono')}" th:errors="*{telefono}"></div>
                </div>

                <!-- Email -->
                <div class="col-md-6">
                    <label class="form-label registro-label">
                        <i class="fas fa-envelope me-2 text-primary icon"></i>Correo Electrónico
                    </label>
                    <input type="email" th:field="*{email}" class="form-control registro-input" placeholder="Ingresa tu correo electrónico">
                    <div class="text-danger registro-error" th:if="${#fields.hasErrors('email')}" th:errors="*{email}"></div>
                </div>

                <!-- Contraseña -->
                <div class="col-md-6">
                    <label class="form-label registro-label">
                        <i class="fas fa-lock me-2 text-primary icon"></i>Contraseña
                    </label>
                    <input type="password" th:field="*{contrasena}" class="form-control registro-input" placeholder="Ingrese su contraseña">
                    <div class="text-danger registro-error" th:if="${#fields.hasErrors('contrasena')}" th:errors="*{contrasena}"></div>
                </div>

                <!-- Confirmar Contraseña -->
                <div class="col-md-6">
                    <label class="form-label registro-label">
                        <i class="fas fa-lock me-2 text-primary icon"></i>Confirmar Contraseña
                    </label>
                    <input type="password" th:field="*{confirmarContrasena}" class="form-control registro-input" placeholder="Confirme su contraseña">
                    <div class="text-danger registro-error" th:if="${#fields.hasErrors('confirmarContrasena')}" th:errors="*{confirmarContrasena}"></div>
                </div>

                <!-- Botón -->
                <div class="col-12 text-center">
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-user-plus"></i>Registrar
                    </button>
                </div>
                
                <!-- Registro -->
                <div class="text-center">
                    <p class="mb-0">¿Ya tienes una cuenta?</p>
                    <a class="btn btn-outline-dark mt-2" th:href="@{/login}">
                        <i class="fas fa-user-plus me-2"></i>Inicia Sesión
                    </a>
                </div>
            </form>
        </div>

        <!-- Scripts -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
        <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    </body>
</html>
